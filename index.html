<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>謎解き公演制御システム</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- 初期選択画面 -->
    <div id="selection-screen" class="screen active">
        <div class="selection-container">
            <h1>謎解き公演制御システム</h1>
            <div class="button-grid">
                <button id="staff-btn" class="selection-btn staff-btn">スタッフ</button>
                <button id="master-btn" class="selection-btn master-btn">マスター</button>
                <button id="monitor-front-btn" class="selection-btn monitor-btn">モニター前</button>
                <button id="monitor-back-btn" class="selection-btn monitor-btn">モニター後</button>
                <button id="camera-btn" class="selection-btn camera-btn">カメラ</button>
                <button id="vehicle-btn" class="selection-btn vehicle-btn">車両番号</button>
            </div>
        </div>
    </div>

    <!-- スタッフ画面 -->
    <div id="staff-screen" class="screen">
        <div class="staff-container">
            <h2>スタッフ制御画面</h2>
            
            <!-- 現在のステップ表示 -->
            <div class="current-step-display">
                <h4>現在のステップ</h4>
                <div class="current-step-info" id="current-step-info">
                    ステップ1: 開始前
                </div>
            </div>

            <!-- チーム進捗管理 -->
            <div class="team-progress-section">
                <h3>チーム進捗管理（12チーム）</h3>
                <div class="team-grid" id="team-grid">
                    <!-- チームカードは JavaScript で動的に生成 -->
                </div>
                
                <div class="global-controls">
                    <button class="global-btn" id="next-all-teams">全チーム次へ</button>
                    <button class="global-btn" id="prev-all-teams">全チーム前へ</button>
                    <button class="global-btn reset" id="reset-all-teams">全チームリセット</button>
                </div>
            </div>

            <!-- 手動制御 -->
            <div class="control-panel">
                <div class="control-group">
                    <h3>手動制御</h3>
                    <button class="control-btn" id="manual-monitor-front">モニター前手動表示</button>
                    <button class="control-btn" id="manual-monitor-back">モニター後手動表示</button>
                    <input type="text" id="manual-vehicle-input" placeholder="車両番号を入力">
                    <button class="control-btn" id="manual-vehicle-send">車両番号手動送信</button>
                </div>
            </div>

            <button class="back-btn" id="back-from-staff">戻る</button>
        </div>
    </div>

    <!-- マスター画面 -->
    <div id="master-screen" class="screen">
        <div class="master-container">
            <h2>マスター制御画面</h2>
            <div class="master-controls">
                <div class="control-group">
                    <h3>車両番号制御</h3>
                    <div class="vehicle-control-panel">
                        <div class="vehicle-controls">
                            <button class="control-btn" id="decrementBtn">前の車両</button>
                            <input type="number" id="carInput" min="1" value="3600" placeholder="車両番号">
                            <button class="control-btn" id="incrementBtn">次の車両</button>
                            <button class="control-btn apply-btn" id="applyBtn">適用</button>
                        </div>
                        <div class="vehicle-status">
                            <span class="status-label">現在の車両番号:</span>
                            <span class="current-vehicle" id="currentVehicleNumber">3600</span>
                            <span class="status-label">自動減少:</span>
                            <span class="auto-status" id="autoStatus">停止中</span>
                        </div>
                    </div>
                </div>
                <div class="control-group">
                    <h3>その他の制御</h3>
                    <p>その他のマスター制御機能がここに表示されます</p>
                </div>
            </div>
            <button class="back-btn" id="back-from-master">戻る</button>
        </div>
    </div>

    <!-- モニター前画面 -->
    <div id="monitor-front-screen" class="screen">
        <div class="monitor-container">
            <h2>モニター前</h2>
            <div class="image-display" id="monitor-front-display">
                <p>画像がここに表示されます</p>
            </div>
            <!-- タップエリア -->
            <div class="tap-area-monitor" id="tap-area-monitor-front"></div>
            <button class="back-btn" id="back-from-monitor-front">戻る</button>
        </div>
    </div>

    <!-- モニター後画面 -->
    <div id="monitor-back-screen" class="screen">
        <div class="monitor-container">
            <h2>モニター後</h2>
            <div class="image-display" id="monitor-back-display">
                <p>画像がここに表示されます</p>
            </div>
            <!-- タップエリア -->
            <div class="tap-area-monitor" id="tap-area-monitor-back"></div>
            <button class="back-btn" id="back-from-monitor-back">戻る</button>
        </div>
    </div>

    <!-- カメラ画面 -->
    <div id="camera-screen" class="screen">
        <div class="camera-container">
            <h2>カメラ</h2>
            <div class="camera-view" id="camera-view">
                <p>カメラ映像がここに表示されます</p>
            </div>
            <button class="back-btn" id="back-from-camera">戻る</button>
        </div>
    </div>

    <!-- 車両番号画面 -->
    <div id="vehicle-screen" class="screen">
        <div class="train-container">
            <div class="train-car-number-display">
                <div class="train-car-frame">
                    <div class="train-emblem">
                        <div class="emblem-inner">
                            <span class="emblem-text">GATANGO TRAIN</span>
                        </div>
                    </div>
                    <div class="car-number-container">
                        <div class="car-number" id="carNumber">3600</div>
                        <div class="car-suffix">号車</div>
                    </div>
                    <div class="car-name">GATANGO</div>
                </div>
            </div>
            
            <!-- 全画面表示ボタン -->
            <div class="fullscreen-button-container">
                <button class="fullscreen-btn" id="fullscreen-btn">全画面表示</button>
            </div>
            
            <!-- タップエリア -->
            <div class="tap-area-vehicle" id="tap-area-vehicle"></div>
        </div>
    </div>

    <!-- 接続状態インジケーター -->
    <div class="connection-indicator" id="connection-indicator"></div>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    
    <!-- アプリケーションのJavaScript -->
    <script src="js/firebase-config.js"></script>
    <script src="js/app.js"></script>
</body>
</html> 